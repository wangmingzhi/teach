<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.teachpmp.server.dao.BankInfoMapper">
  <resultMap id="BaseResultMap" type="com.teachpmp.server.entity.BankInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 13 17:39:08 CST 2020.
    -->
    <id column="bank_id" jdbcType="VARCHAR" property="bankId" />
    <result column="bank_no" jdbcType="VARCHAR" property="bankNo" />
    <result column="order_no" jdbcType="INTEGER" property="orderNo" />
    <result column="area_type" jdbcType="VARCHAR" property="areaType" />
    <result column="bank_name" jdbcType="VARCHAR" property="bankName" />
    <result column="train_type" jdbcType="VARCHAR" property="trainType" />
    <result column="exercise_type" jdbcType="VARCHAR" property="exerciseType" />
    <result column="exercise_num" jdbcType="INTEGER" property="exerciseNum" />
    <result column="is_time" jdbcType="VARCHAR" property="isTime" />
    <result column="time" jdbcType="INTEGER" property="time" />
    <result column="mark_type" jdbcType="VARCHAR" property="markType" />
    <result column="is_enable" jdbcType="VARCHAR" property="isEnable" />
    <result column="create_user" jdbcType="VARCHAR" property="createUser" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_user" jdbcType="VARCHAR" property="updateUser" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 13 17:39:08 CST 2020.
    -->
    delete from tb_bank_info
    where bank_id = #{bankId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.teachpmp.server.entity.BankInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 13 17:39:08 CST 2020.
    -->
    insert into tb_bank_info (bank_id, bank_no, order_no, area_type,
      bank_name, train_type, exercise_type, 
      exercise_num, is_time, time, 
      mark_type, is_enable, create_user, 
      create_time, update_user, update_time
      )
    values (#{bankId,jdbcType=VARCHAR}, #{bankNo,jdbcType=VARCHAR}, #{orderNo,jdbcType=INTEGER}, #{areaType,jdbcType=VARCHAR},
      #{bankName,jdbcType=VARCHAR}, #{trainType,jdbcType=VARCHAR}, #{exerciseType,jdbcType=VARCHAR}, 
      #{exerciseNum,jdbcType=INTEGER}, #{isTime,jdbcType=VARCHAR}, #{time,jdbcType=INTEGER}, 
      #{markType,jdbcType=VARCHAR}, #{isEnable,jdbcType=VARCHAR}, #{createUser,jdbcType=VARCHAR}, 
      #{createTime,jdbcType=TIMESTAMP}, #{updateUser,jdbcType=VARCHAR}, #{updateTime,jdbcType=TIMESTAMP}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.teachpmp.server.entity.BankInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 13 17:39:08 CST 2020.
    -->
    update tb_bank_info
    set bank_no = #{bankNo,jdbcType=VARCHAR},
      order_no = #{orderNo,jdbcType=INTEGER},
      area_type = #{areaType,jdbcType=VARCHAR},
      bank_name = #{bankName,jdbcType=VARCHAR},
      train_type = #{trainType,jdbcType=VARCHAR},
      exercise_type = #{exerciseType,jdbcType=VARCHAR},
      exercise_num = #{exerciseNum,jdbcType=INTEGER},
      is_time = #{isTime,jdbcType=VARCHAR},
      time = #{time,jdbcType=INTEGER},
      mark_type = #{markType,jdbcType=VARCHAR},
      is_enable = #{isEnable,jdbcType=VARCHAR},
      create_user = #{createUser,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_user = #{updateUser,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=TIMESTAMP}
    where bank_id = #{bankId,jdbcType=VARCHAR}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 13 17:39:08 CST 2020.
    -->
    select bank_id, bank_no, order_no, area_type, bank_name, train_type, exercise_type, exercise_num,
    is_time, time, mark_type, is_enable, create_user, create_time, update_user, update_time
    from tb_bank_info
    where bank_id = #{bankId,jdbcType=VARCHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 13 17:39:08 CST 2020.
    -->
    select bank_id, bank_no, order_no, area_type, bank_name, train_type, exercise_type, exercise_num,
    is_time, time, mark_type, is_enable, create_user, create_time, update_user, update_time
    from tb_bank_info
  </select>
  <select id="getBank" resultMap="BaseResultMap" parameterType="com.teachpmp.server.entity.BankInfo">
    select bank_id, bank_no, order_no, area_type, bank_name, train_type, exercise_type, exercise_num,
    is_time, time, mark_type, is_enable, create_user, create_time, update_user, update_time
    from tb_bank_info where bank_no=#{bankNo}
  </select>
  <select id="page" resultMap="BaseResultMap" parameterType="com.teachpmp.server.entity.BankInfo">
    select bank_id, bank_no, b.order_no, area_type, bank_name, train_type, exercise_type, exercise_num,
    is_time, time, mark_type, is_enable, b.create_user, b.create_time, b.update_user, b.update_time
    from tb_bank_info b left join tb_dictionary_info d on b.train_type=d.dictionary_code and d.type_code='TRAN_TYPE_CODE'
    LEFT join tb_dictionary_info f on b.exercise_type=f.dictionary_code and f.type_code='EXER_TYPE_CODE'
    <where>
      <if test="bankNo != null and bankNo != ''">
        and bank_no like concat('%',#{bankNo},'%')
      </if>
      <if test="bankName != null and bankName != ''">
        and bank_name like concat('%',#{bankName},'%')
      </if>
      <if test="trainType != null and trainType != ''">
        and train_type like concat('%',#{trainType},'%')
      </if>
      <if test="exerciseType != null and exerciseType != ''">
        and exercise_type like concat('%',#{exerciseType},'%')
      </if>
      <if test="isTime != null and isTime != ''">
        and is_time like concat('%',#{isTime},'%')
      </if>
      <if test="markType != null and markType != ''">
        and mark_type like concat('%',#{markType},'%')
      </if>
    </where>
    order by d.order_no,f.order_no,b.order_no asc
  </select>
  <update id="updateExerciseNum">
    update tb_bank_info set exercise_num = #{exerciseNum} where bank_id = #{bankId}
  </update>
</mapper>