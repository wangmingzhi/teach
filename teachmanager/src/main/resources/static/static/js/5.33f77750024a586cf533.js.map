{"version":3,"sources":["webpack:///src/views/admin/role/list.vue","webpack:///./src/views/admin/role/list.vue?72d8","webpack:///./src/views/admin/role/list.vue"],"names":["list","components","Pagination","data","queryParam","userName","role","pageIndex","pageSize","form","listLoading","tableData","areaTypeOptions","total","formLoading","dialogDicVisible","roleParam","roleData","roleSelection","roleTotal","roleId","roleLoading","dialogRoleVisible","menuData","checkedMenu","defaultProps","children","label","dialogMenuVisible","formLabelWidth","rules","roleName","required","message","trigger","roleCode","created","this","search","methods","_this2","user","getRolePageList","then","re","response","pageNum","create","$refs","resetFields","edit","row","_this3","selectRole","deleteRole","_this","code","$message","success","error","searchRole","_this4","isEnable","getUserPageList","$nextTick","_this5","forEach","item","i","console","log","roleTable","toggleRowSelection","roleSelectionChange","val","grantRole","roleClose","clearSelection","grant","_this6","userIds","push","userId","grantUser","grantMenu","menuTree","submitMenu","menus","getCheckedKeys","submitForm","_this7","validate","valid","createRole","catch","e","role_list","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","inline","value","callback","$$v","$set","expression","_v","type","icon","on","click","directives","name","rawName","staticStyle","width","border","fit","highlight-current-row","prop","align","scopedSlots","_u","key","fn","size","plain","$event","title","iconColor","onConfirm","slot","page","limit","update:page","update:limit","pagination","visible","update:visible","label-width","close","gutter","span","row-key","selection-change","reserve-selection","show-overflow-tooltip","show-checkbox","node-key","default-expand-all","default-checked-keys","props","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/5.33f77750024a586cf533.js","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParam\" ref=\"queryForm\" :inline=\"true\">\r\n      <el-form-item label=\"名称：\">\r\n        <el-input v-model=\"queryParam.roleName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <!-- <router-link :to=\"{path:'/admin/role/edit'}\" class=\"link-left\">\r\n          <el-button type=\"primary\" icon=\"el-icon-document-add\">新增</el-button>\r\n        </router-link> -->\r\n        <el-button type=\"primary\" @click=\"search\" icon=\"el-icon-search\">查询</el-button>\r\n        <el-button type=\"primary\" @click=\"create\" icon=\"el-icon-document-add\">新增</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-table v-loading=\"listLoading\" :data=\"tableData\" border fit highlight-current-row style=\"width: 100%\">\r\n      <el-table-column prop=\"roleCode\" label=\"角色编码\"/>\r\n      <el-table-column prop=\"roleName\" label=\"角色名称\" />\r\n      <el-table-column prop=\"roleRemarks\" label=\"备注\" />\r\n      <el-table-column prop=\"createUser\" label=\"录入人\"/>\r\n      <el-table-column prop=\"createTime\" label=\"录入时间\" width='100px'/>\r\n      <el-table-column width=\"380px\" label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <!-- <router-link :to=\"{path:'/admin/role/edit', query:{roleId:row.roleId}}\" class=\"link-left\">\r\n            <el-button size=\"mini\" icon=\"el-icon-edit\" type=\"primary\" plain>编辑</el-button>\r\n          </router-link> -->\r\n          <el-button size=\"mini\" @click=\"grantMenu(row)\" class=\"link-left\" type=\"primary\" plain>分配资源</el-button>\r\n          <el-button size=\"mini\" @click=\"grantRole(row)\" class=\"link-left\" type=\"success\" plain>分配用户</el-button>\r\n          <el-button size=\"mini\" @click=\"edit(row)\" icon=\"el-icon-edit\" type=\"primary\" plain>编辑</el-button>\r\n          <el-popconfirm title=\"确定删除吗？\" iconColor=\"red\" @onConfirm=\"deleteRole(row)\">\r\n             <el-button slot=\"reference\" size=\"mini\" type=\"danger\" class=\"link-left\" icon=\"el-icon-delete\">删除</el-button>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParam.pageIndex\" :limit.sync=\"queryParam.pageSize\"\r\n                @pagination=\"search\"/>\r\n  <el-dialog title=\"角色编辑\" :visible.sync=\"dialogDicVisible\">\r\n  <el-form :model=\"form\" ref=\"form\" label-width=\"100px\" v-loading=\"formLoading\" :rules=\"rules\">\r\n      <el-form-item label=\"角色编码：\"  prop=\"roleCode\" required>\r\n       <el-input v-model=\"form.roleCode\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"角色名称：\"  prop=\"roleName\" required>\r\n        <el-input v-model=\"form.roleName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"备注：\">\r\n        <el-input v-model=\"form.roleRemarks\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"dialogDicVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n    </div>\r\n</el-dialog>\r\n<el-dialog title=\"分配用户\" :visible.sync=\"dialogRoleVisible\" @close = \"roleClose\">\r\n  <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n  <el-form :model=\"roleParam\" ref=\"queryForm\" :inline=\"true\">\r\n      <el-form-item label=\"姓名：\">\r\n        <el-input v-model=\"roleParam.userName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"手机号：\">\r\n        <el-input v-model=\"roleParam.phoneNo\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <!-- <router-link :to=\"{path:'/admin/role/edit'}\" class=\"link-left\">\r\n          <el-button type=\"primary\" icon=\"el-icon-document-add\">新增</el-button>\r\n        </router-link> -->\r\n        <el-button type=\"primary\" @click=\"searchRole\" icon=\"el-icon-search\">查询</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-table v-loading=\"roleLoading\" :data=\"roleData\" ref=\"roleTable\" @selection-change=\"roleSelectionChange\"\r\n     border fit highlight-current-row row-key='userId' style=\"width: 100%\">\r\n      <el-table-column type=\"selection\" width=\"55\" :reserve-selection='true'/>\r\n      <el-table-column prop=\"userName\" label=\"姓名\" />\r\n      <el-table-column prop=\"account\" label=\"账号\" />\r\n      <el-table-column prop=\"phoneNo\" label=\"手机号\"/>\r\n      <el-table-column prop=\"email\" label=\"邮箱\" :show-overflow-tooltip=\"true\"/>\r\n      <!-- <el-table-column label=\"是否禁用\" prop=\"isEnable\" width=\"80px;\"/> -->\r\n      <el-table-column prop=\"expiryDate\" label=\"有效期\" width='100px'/>\r\n    </el-table>\r\n    <pagination v-show=\"total>0\" :total=\"roleTotal\" :page.sync=\"roleParam.pageIndex\" :limit.sync=\"roleParam.pageSize\"\r\n                @pagination=\"searchRole\"/>\r\n      </el-col></el-row>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"dialogRoleVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"grant\">确 定</el-button>\r\n    </div>\r\n</el-dialog>\r\n\r\n<el-dialog title=\"分配资源\" :visible.sync=\"dialogMenuVisible\" width=\"30%\">\r\n  <el-tree ref=\"menuTree\" :data=\"menuData\" show-checkbox node-key=\"id\" :default-expand-all=\"true\"\r\n    :default-checked-keys=\"checkedMenu\"\r\n    :props=\"defaultProps\">\r\n  </el-tree>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"dialogMenuVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"submitMenu\">确 定</el-button>\r\n    </div>\r\n</el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from '@/components/Pagination'\r\nimport userApi from '@/api/user'\r\n\r\nexport default {\r\n  components: { Pagination },\r\n  data () {\r\n    return {\r\n      queryParam: {\r\n        userName: '',\r\n        role: 3,\r\n        pageIndex: 1,\r\n        pageSize: 10\r\n      },\r\n      form: {},\r\n      listLoading: true,\r\n      tableData: [],\r\n      areaTypeOptions: [],\r\n      total: 0,\r\n      formLoading: false,\r\n      dialogDicVisible: false,\r\n      roleParam: {\r\n        pageIndex: 1,\r\n        pageSize: 5\r\n      },\r\n      roleData: [],\r\n      roleSelection: [],\r\n      roleTotal: 0,\r\n      roleId: null,\r\n      roleLoading: false,\r\n      dialogRoleVisible: false,\r\n      menuData: [],\r\n      checkedMenu: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'label'\r\n      },\r\n      dialogMenuVisible: false,\r\n      formLabelWidth: '80px',\r\n      rules: {\r\n        roleName: [\r\n          { required: true, message: '请输入角色名称', trigger: 'blur' }\r\n        ],\r\n        roleCode: [\r\n          { required: true, message: '请输入角色编码', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.search()\r\n  },\r\n  methods: {\r\n    search () {\r\n      this.listLoading = true\r\n      userApi.getRolePageList(this.queryParam).then(data => {\r\n        const re = data.response\r\n        this.tableData = re.list\r\n        this.total = re.total\r\n        this.queryParam.pageIndex = re.pageNum\r\n        this.listLoading = false\r\n      })\r\n    },\r\n    create () {\r\n      this.form = {\r\n        roleId: null\r\n      }\r\n      this.dialogDicVisible = true\r\n      this.$refs['form'].resetFields()\r\n    },\r\n    edit (row) {\r\n      this.formLoading = true\r\n      userApi.selectRole(row.roleId).then(re => {\r\n        this.form = re.response\r\n        this.formLoading = false\r\n        this.dialogDicVisible = true\r\n      })\r\n    },\r\n    deleteRole (row) {\r\n      let _this = this\r\n      userApi.deleteRole(row.roleId).then(re => {\r\n        if (re.code === 1) {\r\n          _this.search()\r\n          _this.$message.success(re.message)\r\n        } else {\r\n          _this.$message.error(re.message)\r\n        }\r\n      })\r\n    },\r\n    searchRole () {\r\n      this.roleParam.roleId = this.roleId\r\n      this.roleParam.isEnable = '1'\r\n      userApi.getUserPageList(this.roleParam).then(data => {\r\n        const re = data.response\r\n        this.roleData = re.list\r\n        this.roleTotal = re.total\r\n        this.roleParam.pageIndex = re.pageNum\r\n        this.roleLoading = false\r\n        this.$nextTick(function () {\r\n          this.roleData.forEach((item, i) => {\r\n            console.log(item.roleId)\r\n            if (item.roleId) {\r\n              this.$refs.roleTable.toggleRowSelection(item, true)\r\n            }\r\n          })\r\n        })\r\n      })\r\n    },\r\n    roleSelectionChange (val) {\r\n      this.roleSelection = val\r\n    },\r\n    grantRole (row) {\r\n      this.roleParam = {\r\n        pageIndex: 1,\r\n        pageSize: 5\r\n      }\r\n      this.dialogRoleVisible = true\r\n      this.roleId = row.roleId\r\n      this.roleSelection = []\r\n      this.searchRole()\r\n    },\r\n    roleClose () {\r\n      this.$refs.roleTable.clearSelection()\r\n    },\r\n    grant () {\r\n      let _this = this\r\n      var userIds = []\r\n      this.roleSelection.forEach((item, i) => {\r\n        userIds.push(item.userId)\r\n      })\r\n      userApi.grantUser(this.roleId, userIds).then(data => {\r\n        if (data.code === 1) {\r\n          _this.$message.success(data.message)\r\n          this.dialogRoleVisible = false\r\n        } else {\r\n          _this.$message.error(data.message)\r\n        }\r\n      })\r\n    },\r\n    grantMenu (row) {\r\n      let _this = this\r\n      this.roleId = row.roleId\r\n      userApi.menuTree(this.roleId).then(data => {\r\n        if (data.code === 1) {\r\n          const re = data.response\r\n          _this.menuData = re.menuData\r\n          _this.checkedMenu = re.checkedMenu\r\n          _this.dialogMenuVisible = true\r\n        } else {\r\n          _this.$message.error(data.message)\r\n        }\r\n      })\r\n    },\r\n    submitMenu () {\r\n      let _this = this\r\n      var menus = this.$refs.menuTree.getCheckedKeys(false)\r\n      userApi.grantMenu(this.roleId, menus).then(data => {\r\n        if (data.code === 1) {\r\n          _this.$message.success(data.message)\r\n          _this.dialogMenuVisible = false\r\n        } else {\r\n          _this.$message.error(data.message)\r\n        }\r\n      })\r\n    },\r\n    submitForm () {\r\n      let _this = this\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          this.formLoading = true\r\n          userApi.createRole(this.form).then(data => {\r\n            if (data.code === 1) {\r\n              _this.$message.success(data.message)\r\n              // _this.delCurrentView(_this).then(() => {\r\n              //   _this.$router.push('/admin/role/list')\r\n              // })\r\n              this.dialogDicVisible = false\r\n              _this.formLoading = false\r\n              this.search()\r\n            } else {\r\n              _this.$message.error(data.message)\r\n              _this.formLoading = false\r\n            }\r\n          }).catch(e => {\r\n            _this.formLoading = false\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/admin/role/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{ref:\"queryForm\",attrs:{\"model\":_vm.queryParam,\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"名称：\"}},[_c('el-input',{model:{value:(_vm.queryParam.roleName),callback:function ($$v) {_vm.$set(_vm.queryParam, \"roleName\", $$v)},expression:\"queryParam.roleName\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-document-add\"},on:{\"click\":_vm.create}},[_vm._v(\"新增\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"roleCode\",\"label\":\"角色编码\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleRemarks\",\"label\":\"备注\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createUser\",\"label\":\"录入人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"录入时间\",\"width\":\"100px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"380px\",\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('el-button',{staticClass:\"link-left\",attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.grantMenu(row)}}},[_vm._v(\"分配资源\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"link-left\",attrs:{\"size\":\"mini\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.grantRole(row)}}},[_vm._v(\"分配用户\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-edit\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.edit(row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-popconfirm',{attrs:{\"title\":\"确定删除吗？\",\"iconColor\":\"red\"},on:{\"onConfirm\":function($event){return _vm.deleteRole(row)}}},[_c('el-button',{staticClass:\"link-left\",attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-delete\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],1),_vm._v(\" \"),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total>0),expression:\"total>0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.queryParam.pageIndex,\"limit\":_vm.queryParam.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.queryParam, \"pageIndex\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.queryParam, \"pageSize\", $event)},\"pagination\":_vm.search}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"角色编辑\",\"visible\":_vm.dialogDicVisible},on:{\"update:visible\":function($event){_vm.dialogDicVisible=$event}}},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.formLoading),expression:\"formLoading\"}],ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"角色编码：\",\"prop\":\"roleCode\",\"required\":\"\"}},[_c('el-input',{model:{value:(_vm.form.roleCode),callback:function ($$v) {_vm.$set(_vm.form, \"roleCode\", $$v)},expression:\"form.roleCode\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色名称：\",\"prop\":\"roleName\",\"required\":\"\"}},[_c('el-input',{model:{value:(_vm.form.roleName),callback:function ($$v) {_vm.$set(_vm.form, \"roleName\", $$v)},expression:\"form.roleName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注：\"}},[_c('el-input',{model:{value:(_vm.form.roleRemarks),callback:function ($$v) {_vm.$set(_vm.form, \"roleRemarks\", $$v)},expression:\"form.roleRemarks\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogDicVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"分配用户\",\"visible\":_vm.dialogRoleVisible},on:{\"update:visible\":function($event){_vm.dialogRoleVisible=$event},\"close\":_vm.roleClose}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-form',{ref:\"queryForm\",attrs:{\"model\":_vm.roleParam,\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"姓名：\"}},[_c('el-input',{model:{value:(_vm.roleParam.userName),callback:function ($$v) {_vm.$set(_vm.roleParam, \"userName\", $$v)},expression:\"roleParam.userName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"手机号：\"}},[_c('el-input',{model:{value:(_vm.roleParam.phoneNo),callback:function ($$v) {_vm.$set(_vm.roleParam, \"phoneNo\", $$v)},expression:\"roleParam.phoneNo\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.searchRole}},[_vm._v(\"查询\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.roleLoading),expression:\"roleLoading\"}],ref:\"roleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.roleData,\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\",\"row-key\":\"userId\"},on:{\"selection-change\":_vm.roleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"reserve-selection\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"姓名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"account\",\"label\":\"账号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phoneNo\",\"label\":\"手机号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"expiryDate\",\"label\":\"有效期\",\"width\":\"100px\"}})],1),_vm._v(\" \"),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total>0),expression:\"total>0\"}],attrs:{\"total\":_vm.roleTotal,\"page\":_vm.roleParam.pageIndex,\"limit\":_vm.roleParam.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.roleParam, \"pageIndex\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.roleParam, \"pageSize\", $event)},\"pagination\":_vm.searchRole}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogRoleVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.grant}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"分配资源\",\"visible\":_vm.dialogMenuVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogMenuVisible=$event}}},[_c('el-tree',{ref:\"menuTree\",attrs:{\"data\":_vm.menuData,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":true,\"default-checked-keys\":_vm.checkedMenu,\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogMenuVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitMenu}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5403a329\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/role/list.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5403a329\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/role/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}